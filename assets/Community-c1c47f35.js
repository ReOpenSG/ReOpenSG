import{p as e,j as t,i as b,d as R}from"./index-19d140ff.js";import{r as P}from"./react-801b4781.js";import{a as q,c as j}from"./fbStore-ed2d4d67.js";import{Q as C}from"./react-toastify.esm-41251aa7.js";import{d as k}from"./recoil-fd109243.js";import{B as A}from"./BannerSection-01a753b3.js";import{N,d as S}from"./reactRouter-560c2f4d.js";import{s as i}from"./styles.module-9ce859ce.js";import"./fbAuth-9e87268e.js";import"./fbApp-26a327c1.js";import"./fbStorage-a10cdba0.js";import"./aos-716c7930.js";/* empty css            */function l({notice:s,notices:r}){var a,d;const n=(a=s==null?void 0:s.data)!=null&&a.updatedAt?new Date(s.data.updatedAt.seconds*1e3+s.data.updatedAt.nanoseconds/1e6):null,p=n==null?void 0:n.toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"});return t.jsx(N,{to:`/community/${s==null?void 0:s.id}`,state:{currentNotice:s,notices:r},children:t.jsxs("div",{className:i.noticeItem,children:[t.jsx("h3",{className:i.noticeTitle,children:(d=s==null?void 0:s.data)==null?void 0:d.title}),t.jsx("time",{className:i.noticeCreatedAt,dateTime:p,children:p})]})})}l.propTypes={notices:e.PropTypes.arrayOf(e.PropTypes.shape({id:e.PropTypes.string.isRequired,data:e.PropTypes.objectOf({index:e.PropTypes.number,title:e.PropTypes.string,content:e.PropTypes.string,imageUrl:e.PropTypes.string,updatedAt:e.PropTypes.arrayOf({seconds:e.PropTypes.number,nanoseconds:e.PropTypes.number})}).isRequired})).isRequired,notice:e.PropTypes.objectOf(e.PropTypes.shape({id:e.PropTypes.string.isRequired,data:e.PropTypes.shape({index:e.PropTypes.number,title:e.PropTypes.string,content:e.PropTypes.string,imageUrl:e.PropTypes.string,updatedAt:e.PropTypes.shape({seconds:e.PropTypes.number,nanoseconds:e.PropTypes.number})}).isRequired})).isRequired};l.propTypes={notices:e.PropTypes.arrayOf(e.PropTypes.shape({id:e.PropTypes.string.isRequired,data:e.PropTypes.shape({index:e.PropTypes.number,title:e.PropTypes.string,content:e.PropTypes.string,imageUrl:e.PropTypes.string,updatedAt:e.PropTypes.shape({seconds:e.PropTypes.number,nanoseconds:e.PropTypes.number})}).isRequired})).isRequired,notice:e.PropTypes.shape({id:e.PropTypes.string.isRequired,data:e.PropTypes.shape({index:e.PropTypes.number,title:e.PropTypes.string,content:e.PropTypes.string,imageUrl:e.PropTypes.string,updatedAt:e.PropTypes.shape({seconds:e.PropTypes.number,nanoseconds:e.PropTypes.number})}).isRequired}).isRequired};function m({notices:s,currentNotices:r}){var n;return t.jsx("div",{className:i.noticeList,children:(n=r==null?void 0:r.slice().toSorted((p,a)=>a.data.index-p.data.index))==null?void 0:n.map(p=>t.jsx(l,{notice:p,notices:s},p==null?void 0:p.id))})}m.propTypes={notices:e.PropTypes.arrayOf(e.PropTypes.shape({id:e.PropTypes.string.isRequired,data:e.PropTypes.shape({index:e.PropTypes.number,title:e.PropTypes.string,content:e.PropTypes.string,imageUrl:e.PropTypes.string,updatedAt:e.PropTypes.shape({seconds:e.PropTypes.number,nanoseconds:e.PropTypes.number})}).isRequired})).isRequired,currentNotices:e.PropTypes.arrayOf(e.PropTypes.shape({id:e.PropTypes.string.isRequired,data:e.PropTypes.shape({index:e.PropTypes.number,title:e.PropTypes.string,content:e.PropTypes.string,imageUrl:e.PropTypes.string,updatedAt:e.PropTypes.shape({seconds:e.PropTypes.number,nanoseconds:e.PropTypes.number})}).isRequired})).isRequired};function g({currentPage:s,pageCount:r,handleFirstPage:n,handlePrevPage:p,handlePageChange:a,handleNextPage:d,handleLastPage:u}){return t.jsxs("div",{className:i.listButtons,children:[t.jsx("button",{type:"button",onClick:n,className:"",children:"≪"}),t.jsx("button",{type:"button",onClick:p,className:"-rotate-90",children:"⋀"}),Array.from({length:r},(o,y)=>y+1).map(o=>t.jsx("button",{type:"button",onClick:()=>a(o),className:`${i.pageNum} ${s===o?i.currentPage:""}`,children:o},o)),t.jsx("button",{type:"button",onClick:d,className:"-rotate-90",children:"⋁"}),t.jsx("button",{type:"button",onClick:u,children:"≫"})]})}g.propTypes={currentPage:e.PropTypes.number.isRequired,pageCount:e.PropTypes.number.isRequired,handleFirstPage:e.PropTypes.func.isRequired,handlePrevPage:e.PropTypes.func.isRequired,handlePageChange:e.PropTypes.func.isRequired,handleNextPage:e.PropTypes.func.isRequired,handleLastPage:e.PropTypes.func.isRequired};function h({sortedNotices:s}){const[r,n]=P.useState(1),p=6,a=s==null?void 0:s.slice((r-1)*p,r*p),d=Math.ceil(s.length/p),u=f=>n(f),o=()=>{r>1&&n(r-1)},y=()=>{r<d&&n(r+1)},c=()=>{n(1)},x=()=>{n(d)},T={currentPage:r,pageCount:Math.ceil(s.length/p),handleFirstPage:c,handlePrevPage:o,handlePageChange:u,handleNextPage:y,handleLastPage:x};return t.jsxs("section",{className:i.noticeWrapper,children:[t.jsx("span",{className:"sr-only",children:"커뮤니티 리스트"}),t.jsxs("p",{className:i.pageCount,children:["Total: ",s==null?void 0:s.length," [",r," / ",T.pageCount,"]"]}),t.jsx(m,{notices:s,currentNotices:a}),t.jsx(g,{...T})]})}h.propTypes={sortedNotices:e.PropTypes.arrayOf(e.PropTypes.shape({id:e.PropTypes.string.isRequired,data:e.PropTypes.shape({index:e.PropTypes.number,title:e.PropTypes.string,content:e.PropTypes.string,imageUrl:e.PropTypes.string,updatedAt:e.PropTypes.shape({seconds:e.PropTypes.number,nanoseconds:e.PropTypes.number})}).isRequired})).isRequired};function W(){const[s,r]=P.useState([]),n=k(b),p=S();P.useEffect(()=>{(async()=>{try{const o=await q(j(R,"community")),y=[];o.forEach(c=>{y.push({id:c.id,data:c.data()})}),r(y)}catch(o){C.error(o)}})()},[]);const a=s==null?void 0:s.slice().toSorted((u,o)=>o.data.index-u.data.index),d=()=>{p("write",{state:{notices:a}})};return t.jsxs("div",{className:i.community,children:[t.jsx(A,{category:"Support",title:"커뮤니티"}),n?t.jsx("div",{className:`flex w-full animate-bounce
      justify-end
      p-open-gutter-mobile tablet:p-open-gutter-desktop  desktop:p-open-gutter-desktop`,children:t.jsx("button",{type:"button",className:"rounded-md bg-slate-400 p-open-lg text-open-font-medium -text--openfoundation-black tablet:p-open-xl tablet:text-open-font-large desktop:p-open-xl desktop:text-open-font-xl",onClick:d,children:"글쓰러 가기"})}):"",t.jsx(h,{sortedNotices:a})]})}export{W as default};
